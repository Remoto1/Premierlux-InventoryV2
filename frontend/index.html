<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Premierlux Inventory System</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://unpkg.com/preline@latest/dist/preline.css">
  <script src="https://unpkg.com/preline@latest/dist/preline.js"></script>

  <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
  <script src="https://unpkg.com/htmx.org@1.9.12"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.socket.io/4.7.5/socket.io.min.js" crossorigin="anonymous"></script>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      if (typeof Chart !== 'undefined') {
        const OriginalChart = Chart;
        window.Chart = new Proxy(OriginalChart, {
          construct(target, args) {
            const [canvasItem, config] = args;
            const canvas = typeof canvasItem === 'string' ? document.getElementById(canvasItem) : canvasItem;
            if (canvas) {
              const existing = OriginalChart.getChart(canvas);
              if (existing) existing.destroy();
            }
            return new target(...args);
          }
        });
        Object.assign(window.Chart, OriginalChart);
      }
    });
  </script>
  <style>
    /* Glassy Scrollbar */
    .custom-scrollbar::-webkit-scrollbar {
      width: 6px;
    }

    .custom-scrollbar::-webkit-scrollbar-track {
      background: rgba(255, 255, 255, 0.1);
    }

    .custom-scrollbar::-webkit-scrollbar-thumb {
      background: rgba(148, 163, 184, 0.5);
      border-radius: 20px;
    }

    .custom-scrollbar::-webkit-scrollbar-thumb:hover {
      background: rgba(100, 116, 139, 0.8);
    }

    .pointer-events-none {
      pointer-events: none;
    }

    @keyframes flashHighlight {
      0% {
        background-color: rgba(59, 130, 246, 0.1);
        box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.5);
      }

      50% {
        background-color: rgba(253, 224, 71, 0.3);
        box-shadow: 0 0 0 4px rgba(234, 179, 8, 0.5);
        transform: scale(1.02);
      }

      100% {
        background-color: white;
        transform: scale(1);
      }
    }

    .highlight-pulse {
      animation: flashHighlight 2s ease-out;
      border-color: #f59e0b !important;
      /* Yellow border */
      z-index: 50;
      /* Bring to front */
    }
  </style>
</head>

<body
  class="bg-gradient-to-br from-indigo-100 via-purple-100 to-pink-100 min-h-screen font-sans text-slate-700 selection:bg-emerald-200 selection:text-emerald-900">
  <div class="min-h-screen flex flex-col">

    <header class="px-6 pt-4 pb-2 flex justify-center relative z-50">
      <div class="w-full max-w-6xl flex items-center justify-between gap-4
              rounded-full bg-slate-900 text-slate-100 px-5 py-2 shadow-2xl ring-1 ring-white/20">

        <div class="flex items-center gap-2 select-none">
          <div class="h-8 w-8 rounded-full bg-slate-800 flex items-center justify-center">
            <span class="text-lg font-bold text-emerald-400">P</span>
          </div>
          <span class="text-sm font-semibold tracking-tight">Premierlux Inventory</span>
        </div>

        <nav class="flex items-center gap-6 text-xs font-medium">
          <button type="button" onclick="showPage('dashboard'); closeAllDropdowns();"
            class="hover:text-emerald-300 transition-colors focus:outline-none">Dashboard</button>

          <div class="relative group" data-menu-root>
            <button type="button"
              class="hover:text-emerald-300 transition-colors flex items-center gap-1 focus:outline-none"
              onclick="toggleMenu('inventoryMenu')">Inventory <span>‚ñæ</span></button>
            <div id="inventoryMenu"
              class="nav-dropdown absolute left-1/2 -translate-x-1/2 mt-4 w-56 bg-slate-900/95 backdrop-blur-xl text-slate-100 rounded-2xl shadow-xl border border-white/10 opacity-0 invisible transition-all duration-200 transform origin-top z-50">
              <div class="p-2 space-y-1">
                <button onclick="showPage('inventory'); closeAllDropdowns();"
                  class="w-full flex items-center justify-between py-2 px-3 rounded-xl hover:bg-slate-800 transition"><span>Inventory</span><span>‚Üí</span></button>
                <button onclick="showPage('qr'); closeAllDropdowns();"
                  class="w-full flex items-center justify-between py-2 px-3 rounded-xl hover:bg-slate-800 transition"><span>QR
                    Tracking</span><span>‚Üí</span></button>
              </div>
            </div>
          </div>

          <div class="relative group" data-menu-root>
            <button type="button"
              class="hover:text-emerald-300 transition-colors flex items-center gap-1 focus:outline-none"
              onclick="toggleMenu('procurementMenu')">Procurement <span>‚ñæ</span></button>
            <div id="procurementMenu"
              class="nav-dropdown absolute left-1/2 -translate-x-1/2 mt-4 w-56 bg-slate-900/95 backdrop-blur-xl text-slate-100 rounded-2xl shadow-xl border border-white/10 opacity-0 invisible transition-all duration-200 transform origin-top z-50">
              <div class="p-2 space-y-1">
                <button onclick="showPage('suppliers'); closeAllDropdowns();"
                  class="w-full flex items-center justify-between py-2 px-3 rounded-xl hover:bg-slate-800 transition"><span>Suppliers</span><span>‚Üí</span></button>
                <button onclick="showPage('orders'); closeAllDropdowns();"
                  class="w-full flex items-center justify-between py-2 px-3 rounded-xl hover:bg-slate-800 transition"><span>Orders</span><span>‚Üí</span></button>
              </div>
            </div>
          </div>

          <div class="relative group" data-menu-root>
            <button type="button"
              class="hover:text-emerald-300 transition-colors flex items-center gap-1 focus:outline-none"
              onclick="toggleMenu('adminMenu')">Admin <span>‚ñæ</span></button>
            <div id="adminMenu"
              class="nav-dropdown absolute left-1/2 -translate-x-1/2 mt-4 w-56 bg-slate-900/95 backdrop-blur-xl text-slate-100 rounded-2xl shadow-xl border border-white/10 opacity-0 invisible transition-all duration-200 transform origin-top z-50">
              <div class="p-2 space-y-1">
                <button onclick="showPage('compliance'); closeAllDropdowns();"
                  class="w-full flex items-center justify-between py-2 px-3 rounded-xl hover:bg-slate-800 transition"><span>Compliance</span><span>‚Üí</span></button>
                <button onclick="showPage('admin-roles'); closeAllDropdowns();"
                  class="w-full flex items-center justify-between py-2 px-3 rounded-xl hover:bg-slate-800 transition"><span>Roles</span><span>‚Üí</span></button>
                <button onclick="showPage('admin-logs'); closeAllDropdowns();"
                  class="w-full flex items-center justify-between py-2 px-3 rounded-xl hover:bg-slate-800 transition"><span>Logs</span><span>‚Üí</span></button>
                <button onclick="openBranchesFromAdmin(); closeAllDropdowns();"
                  class="w-full flex items-center justify-between py-2 px-3 rounded-xl hover:bg-slate-800 transition"><span>Branches</span><span>‚Üí</span></button>
              </div>
            </div>
          </div>

          <div class="relative z-50" data-menu-root>
            <button type="button"
              class="h-8 w-8 rounded-full bg-slate-800 flex items-center justify-center text-slate-300 hover:bg-slate-700 transition relative focus:outline-none cursor-pointer"
              onclick="toggleMenu('alertsMenu')">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 pointer-events-none" viewBox="0 0 24 24"
                fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
                <path d="M15 17h5l-1.4-1.4A2 2 0 0 1 18 14.2V11a6 6 0 0 0-12 0v3.2c0 .5-.2 1-.6 1.4L4 17h5" />
                <path d="M9 17a3 3 0 0 0 6 0" />
              </svg>
              <span id="alertsBadge"
                class="absolute -top-1 -right-1 hidden text-[9px] px-1.5 rounded-full bg-rose-500 text-white border border-slate-900 pointer-events-none">0</span>
            </button>
            <div id="alertsMenu"
              class="nav-dropdown absolute right-0 mt-4 w-80 bg-slate-900/95 backdrop-blur-xl text-slate-100 rounded-2xl shadow-xl border border-white/10 opacity-0 invisible transition-all duration-200 transform origin-top-right z-50">
              <div class="p-3 space-y-2 text-xs max-h-80 overflow-y-auto custom-scrollbar" id="alertsDropdownList">
                <div class="text-[11px] text-slate-400">No alerts yet.</div>
              </div>
            </div>
          </div>

          <button type="button" onclick="showPage('analytics'); closeAllDropdowns();"
            class="h-8 w-8 rounded-full bg-white/10 border border-white/20 flex items-center justify-center text-slate-100 hover:bg-white/20 hover:text-emerald-300 transition text-xs mr-1 focus:outline-none">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 pointer-events-none" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
              <path d="M4 19h16" />
              <path d="M5 17l4-6 4 3 6-8" />
              <circle cx="9" cy="11" r="1" />
              <circle cx="13" cy="14" r="1" />
              <circle cx="19" cy="6" r="1" />
            </svg>
          </button>
          <button type="button" onclick="doLogout()"
            class="text-xs px-3 py-1 rounded-full bg-slate-800 hover:bg-slate-700 transition">
            Sign out
          </button>
      </div>
    </header>

    <main class="flex-1 px-6 pb-8 pt-4 relative z-0">
      <div class="w-full max-w-6xl mx-auto">

        <section id="dashboard-section" class="hidden space-y-8 animate-fade-in">
          <div class="flex flex-col md:flex-row md:items-center justify-between gap-4">
            <div>
              <h1 class="text-3xl font-extrabold text-slate-800 tracking-tight">Dashboard</h1>
              <p class="text-sm text-slate-500 font-medium">Overview of inventory health & financials</p>
            </div>
            <div class="flex items-center gap-3">
              <span class="text-xs font-semibold text-slate-400 bg-slate-100 px-3 py-1.5 rounded-full">
                Last updated: <span id="dash-timestamp">Just now</span>
              </span>
              <button onclick="initDashboard()"
                class="p-2 rounded-full bg-white border border-slate-200 text-slate-500 hover:text-emerald-600 hover:border-emerald-200 transition shadow-sm">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15">
                  </path>
                </svg>
              </button>
            </div>
          </div>

          <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">

            <div
              class="relative overflow-hidden bg-white/60 backdrop-blur-xl border border-white/60 rounded-3xl p-6 shadow-sm transition-all duration-300 hover:-translate-y-1 hover:bg-emerald-50/80 hover:border-emerald-200 hover:shadow-md cursor-default">
              <div class="flex items-center gap-4 relative z-10">
                <div
                  class="h-12 w-12 rounded-2xl bg-emerald-100 text-emerald-600 flex items-center justify-center text-2xl shadow-sm">
                  üí∞</div>
                <div>
                  <p class="text-[11px] font-bold text-slate-400 uppercase tracking-wider">Total Value</p>
                  <h3 class="text-2xl font-black text-slate-800 tracking-tight" id="dash-total-value">Loading...</h3>
                </div>
              </div>
            </div>

            <div onclick="handleNotificationClick('', '')"
              class="cursor-pointer relative overflow-hidden bg-white/60 backdrop-blur-xl border border-white/60 rounded-3xl p-6 shadow-sm transition-all duration-300 hover:-translate-y-1 hover:bg-rose-50/80 hover:border-rose-200 hover:shadow-md">
              <div class="flex items-center gap-4 relative z-10">
                <div
                  class="h-12 w-12 rounded-2xl bg-rose-100 text-rose-600 flex items-center justify-center text-2xl shadow-sm">
                  üìâ</div>
                <div>
                  <p class="text-[11px] font-bold text-slate-400 uppercase tracking-wider">Low Stock</p>
                  <h3 class="text-2xl font-black text-rose-600 tracking-tight" id="dash-low-stock">0</h3>
                </div>
              </div>
            </div>

            <div
              class="relative overflow-hidden bg-white/60 backdrop-blur-xl border border-white/60 rounded-3xl p-6 shadow-sm transition-all duration-300 hover:-translate-y-1 hover:bg-orange-50/80 hover:border-orange-200 hover:shadow-md cursor-default">
              <div class="flex items-center gap-4 relative z-10">
                <div
                  class="h-12 w-12 rounded-2xl bg-orange-100 text-orange-600 flex items-center justify-center text-2xl shadow-sm">
                  ‚ö†Ô∏è</div>
                <div>
                  <p class="text-[11px] font-bold text-slate-400 uppercase tracking-wider">Expiring</p>
                  <h3 class="text-2xl font-black text-slate-800 tracking-tight" id="dash-expiring">0</h3>
                </div>
              </div>
            </div>

            <div
              class="relative overflow-hidden bg-white/60 backdrop-blur-xl border border-white/60 rounded-3xl p-6 shadow-sm transition-all duration-300 hover:-translate-y-1 hover:bg-indigo-50/80 hover:border-indigo-200 hover:shadow-md cursor-default">
              <div class="flex items-center gap-4 relative z-10">
                <div
                  class="h-12 w-12 rounded-2xl bg-indigo-100 text-indigo-600 flex items-center justify-center text-2xl shadow-sm">
                  üè¢</div>
                <div>
                  <p class="text-[11px] font-bold text-slate-400 uppercase tracking-wider">Branches</p>
                  <h3 class="text-2xl font-black text-slate-800 tracking-tight" id="dash-branches">0</h3>
                </div>
              </div>
            </div>
          </div>
          <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
            <div
              class="lg:col-span-2 bg-white/80 backdrop-blur-xl border border-white/60 rounded-3xl shadow-[0_8px_30px_rgb(0,0,0,0.04)] p-6">
              <div class="flex items-center justify-between mb-6">
                <h3 class="font-bold text-slate-700 text-lg">Stock Value by Branch</h3>
                <button
                  class="text-xs bg-slate-100 hover:bg-slate-200 text-slate-600 px-3 py-1 rounded-lg transition">View
                  Details</button>
              </div>
              <div class="h-[300px] w-full">
                <canvas id="dashBranchChart"></canvas>
              </div>
            </div>

            <div
              class="bg-white/80 backdrop-blur-xl border border-white/60 rounded-3xl shadow-[0_8px_30px_rgb(0,0,0,0.04)] p-6 flex flex-col">
              <h3 class="font-bold text-slate-700 text-lg mb-4">Inventory Mix</h3>

              <div class="h-[250px] w-full relative">
                <canvas id="dashCategoryChart"></canvas>
              </div>
            </div>
          </div>

          <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
            <div
              class="bg-white/80 backdrop-blur-xl border border-white/60 rounded-3xl shadow-[0_8px_30px_rgb(0,0,0,0.04)] flex flex-col overflow-hidden">
              <div class="p-6 border-b border-slate-100 flex justify-between items-center">
                <div class="flex items-center gap-2">
                  <div class="w-2 h-2 rounded-full bg-rose-500 animate-pulse"></div>
                  <h3 class="font-bold text-slate-800">Urgent Restock Needed</h3>
                </div>
                <button onclick="showPage('inventory')"
                  class="text-xs text-rose-600 hover:bg-rose-50 px-2 py-1 rounded transition">View All</button>
              </div>
              <div class="flex-1 overflow-x-auto">
                <table class="w-full text-sm text-left">
                  <thead class="bg-slate-50/50 text-xs uppercase text-slate-400 font-semibold">
                    <tr>
                      <th class="px-6 py-3">Item Name</th>
                      <th class="px-6 py-3">Branch</th>
                      <th class="px-6 py-3 text-right">Stock</th>
                      <th class="px-6 py-3 text-center">Action</th>
                    </tr>
                  </thead>
                  <tbody class="divide-y divide-slate-100" id="dash-restock-table">
                  </tbody>
                </table>
              </div>
            </div>

            <div
              class="bg-gradient-to-br from-indigo-900 to-slate-900 text-white rounded-3xl shadow-[0_8px_30px_rgb(0,0,0,0.15)] p-8 relative overflow-hidden flex flex-col justify-center">
              <div
                class="absolute top-0 right-0 -mt-10 -mr-10 w-40 h-40 bg-indigo-500 rounded-full blur-[80px] opacity-40">
              </div>
              <div
                class="absolute bottom-0 left-0 -mb-10 -ml-10 w-40 h-40 bg-purple-500 rounded-full blur-[80px] opacity-40">
              </div>

              <div class="relative z-10">
                <h3 class="flex items-center gap-2 text-lg font-bold mb-4 text-indigo-200">
                  <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                      d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                  </svg>
                  AI Insights
                </h3>
                <p id="dash-ai-text" class="text-lg font-medium leading-relaxed text-slate-100">
                  Analysis in progress...
                </p>
                <div class="mt-6 flex items-center gap-4">
                  <div
                    class="px-3 py-1 bg-white/10 rounded-full text-xs font-mono text-indigo-200 border border-white/10"
                    id="dash-ai-stats">
                    ...
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>

        <section id="inventory-section" class="hidden" x-data="{ search: '' }">
          <div class="pt-4 mb-6 flex flex-col md:flex-row md:items-end justify-between gap-4">

            <div>
              <h2 class="text-3xl font-extrabold text-slate-800 tracking-tight">Inventory</h2>
              <p class="text-sm text-slate-500">Per‚Äëbranch stock management.</p>
            </div>

            <div class="flex flex-wrap items-center gap-3 relative z-20">

              <div class="relative z-50">
                <button type="button" id="branchDropdownBtn" onclick="toggleBranchMenu()"
                  class="w-48 bg-white/50 backdrop-blur-xl border border-white/60 text-slate-700 py-2.5 pl-4 pr-10 rounded-xl shadow-sm hover:shadow-md hover:bg-white/80 outline-none transition-all duration-200 text-sm font-bold text-left flex items-center justify-between">
                  <span id="branchLabel">All branches</span>

                  <svg class="w-4 h-4 text-slate-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                  </svg>
                </button>

                <div id="branchDropdownOptions"
                  class="hidden absolute top-full left-0 mt-2 w-48 bg-white/90 backdrop-blur-xl border border-white/60 rounded-xl shadow-xl max-h-60 overflow-y-auto custom-scrollbar p-1 transform origin-top transition-all">
                </div>

                <input type="hidden" id="branchFilter" value="All">
              </div>

              <div class="relative group">
                <input type="text" id="inventorySearch" oninput="fetchInventory()" placeholder="Search items..."
                  class="w-64 bg-white/50 backdrop-blur-xl border border-white/60 text-slate-700 py-2.5 pl-10 pr-4 rounded-xl shadow-sm hover:shadow-md hover:bg-white/80 focus:ring-2 focus:ring-indigo-500/30 focus:border-indigo-500 outline-none transition-all duration-200 text-sm placeholder:text-slate-400">

                <span
                  class="absolute inset-y-0 left-3 flex items-center text-slate-400 group-hover:text-indigo-500 transition-colors pointer-events-none">
                  <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                      d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                  </svg>
                </span>
              </div>

              <button onclick="openBatchOverlay()"
                class="bg-slate-900 hover:bg-slate-800 text-white px-5 py-2.5 rounded-xl font-bold text-sm shadow-lg shadow-slate-900/20 transition transform active:scale-95 flex items-center gap-2">
                <span>+</span> Add Batch
              </button>
            </div>
          </div>

          <div id="inventoryCards"
            class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 relative z-10">
          </div>

          <div id="inventoryEmptyState" class="hidden mt-20 flex flex-col items-center justify-center text-center">
            <div class="text-4xl mb-4 opacity-50">üì¶</div>
            <p class="text-lg font-bold text-slate-700">No inventory items</p>
          </div>
        </section>

        <section id="suppliers-section" class="hidden space-y-6 animate-fade-in">
          <div class="flex flex-col md:flex-row md:items-center justify-between gap-4">
            <div>
              <h2 class="text-3xl font-extrabold text-slate-800 tracking-tight">Supplier Directory</h2>
              <p class="text-sm text-slate-500">Manage vendor contacts and lead times.</p>
            </div>
            <button onclick="openSupplierModal()"
              class="bg-slate-900 hover:bg-slate-800 text-white px-5 py-2.5 rounded-xl font-bold text-sm shadow-lg shadow-slate-900/20 transition transform active:scale-95 flex items-center gap-2">
              <span>+</span> Add Supplier
            </button>
          </div>

          <div
            class="bg-white/60 backdrop-blur-xl border border-white/60 rounded-2xl p-2 flex gap-2 max-w-md shadow-sm">
            <div class="flex-1 relative">
              <span class="absolute left-3 top-2.5 text-slate-400">üîç</span>
              <input type="text" placeholder="Search suppliers..."
                class="w-full bg-transparent pl-9 pr-4 py-2 text-sm outline-none text-slate-700 placeholder:text-slate-400">
            </div>
          </div>

          <div id="suppliersGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            <div class="text-slate-500 text-sm p-4">Loading suppliers...</div>
          </div>
        </section>

        <section id="orders-section" class="hidden space-y-6 animate-fade-in">
          <div class="flex flex-col md:flex-row md:items-center justify-between gap-4">
            <div>
              <h2 class="text-3xl font-extrabold text-slate-800 tracking-tight">Purchase Orders</h2>
              <p class="text-sm text-slate-500">Track replenishment and incoming stock.</p>
            </div>
            <div class="flex gap-2">
              <button onclick="filterOrders('all')"
                class="px-4 py-2 rounded-xl bg-white border border-slate-200 text-slate-600 text-xs font-bold hover:bg-slate-50 active:bg-slate-100 transition">All</button>
              <button onclick="filterOrders('pending')"
                class="px-4 py-2 rounded-xl bg-amber-50 border border-amber-100 text-amber-600 text-xs font-bold hover:bg-amber-100 transition">Pending</button>
              <button onclick="filterOrders('completed')"
                class="px-4 py-2 rounded-xl bg-emerald-50 border border-emerald-100 text-emerald-600 text-xs font-bold hover:bg-emerald-100 transition">Received</button>
            </div>
          </div>

          <div
            class="bg-white/80 backdrop-blur-xl border border-white/60 rounded-3xl shadow-[0_8px_30px_rgb(0,0,0,0.04)] overflow-hidden">
            <div class="overflow-x-auto">
              <table class="w-full text-sm text-left">
                <thead class="bg-slate-50/80 text-xs uppercase text-slate-400 font-semibold border-b border-slate-100">
                  <tr>
                    <th class="px-6 py-4">Order Ref</th>
                    <th class="px-6 py-4">Item Details</th>
                    <th class="px-6 py-4">Branch</th>
                    <th class="px-6 py-4">Status</th>
                    <th class="px-6 py-4">Date</th>
                    <th class="px-6 py-4 text-center">Actions</th>
                  </tr>
                </thead>
                <tbody id="ordersTableBody" class="divide-y divide-slate-100">
                </tbody>
              </table>
            </div>
          </div>
        </section>

        <section id="analytics-section" class="hidden space-y-8 animate-fade-in">

          <div class="flex flex-col md:flex-row md:items-center justify-between gap-4">
            <div>
              <h2 class="text-3xl font-extrabold text-slate-800 tracking-tight">Analytics & Reports</h2>
              <p class="text-sm text-slate-500">Deep dive into inventory performance.</p>
            </div>
            <div class="flex items-center gap-3">
              <span class="text-xs font-semibold text-slate-400 bg-slate-100 px-3 py-1.5 rounded-full">
                Live Data
              </span>
              <button onclick="initAnalyticsOverview(); fetchAnalyticsData();"
                class="p-2 rounded-full bg-white border border-slate-200 text-slate-500 hover:text-indigo-600 hover:border-indigo-200 transition shadow-sm">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15">
                  </path>
                </svg>
              </button>
            </div>
          </div>

          <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">

            <div
              class="relative overflow-hidden bg-white/60 backdrop-blur-xl border border-white/60 rounded-3xl p-6 shadow-sm transition-all duration-300 hover:-translate-y-1 hover:bg-indigo-50/80 hover:border-indigo-200 hover:shadow-md cursor-default">
              <div class="flex items-center gap-4 relative z-10">
                <div
                  class="h-12 w-12 rounded-2xl bg-indigo-100 text-indigo-600 flex items-center justify-center text-xl shadow-sm">
                  ‚ú®
                </div>
                <div>
                  <p class="text-[10px] font-bold text-slate-400 uppercase tracking-wider">New Items (7d)</p>
                  <h3 class="text-2xl font-black text-slate-800 tracking-tight" id="an-new-items">0</h3>
                </div>
              </div>
            </div>

            <div
              class="relative overflow-hidden bg-white/60 backdrop-blur-xl border border-white/60 rounded-3xl p-6 shadow-sm transition-all duration-300 hover:-translate-y-1 hover:bg-emerald-50/80 hover:border-emerald-200 hover:shadow-md cursor-default">
              <div class="flex items-center gap-4 relative z-10">
                <div
                  class="h-12 w-12 rounded-2xl bg-emerald-100 text-emerald-600 flex items-center justify-center text-xl shadow-sm">
                  üì¶</div>
                <div>
                  <p class="text-[10px] font-bold text-slate-400 uppercase tracking-wider">Batches (7d)</p>
                  <h3 class="text-2xl font-black text-slate-800 tracking-tight" id="an-batches-7d">0</h3>
                </div>
              </div>
            </div>

            <div
              class="relative overflow-hidden bg-white/60 backdrop-blur-xl border border-white/60 rounded-3xl p-6 shadow-sm transition-all duration-300 hover:-translate-y-1 hover:bg-blue-50/80 hover:border-blue-200 hover:shadow-md cursor-default">
              <div class="flex items-center gap-4 relative z-10">
                <div
                  class="h-12 w-12 rounded-2xl bg-blue-100 text-blue-600 flex items-center justify-center text-xl shadow-sm">
                  üìä
                </div>
                <div>
                  <p class="text-[10px] font-bold text-slate-400 uppercase tracking-wider">Total Products</p>
                  <h3 class="text-2xl font-black text-slate-800 tracking-tight" id="an-total-items">0</h3>
                </div>
              </div>
            </div>

            <div
              class="relative overflow-hidden bg-white/60 backdrop-blur-xl border border-white/60 rounded-3xl p-6 shadow-sm transition-all duration-300 hover:-translate-y-1 hover:bg-purple-50/80 hover:border-purple-200 hover:shadow-md cursor-default">
              <div class="flex items-center gap-4 relative z-10">
                <div
                  class="h-12 w-12 rounded-2xl bg-purple-100 text-purple-600 flex items-center justify-center text-xl shadow-sm">
                  üè¢</div>
                <div>
                  <p class="text-[10px] font-bold text-slate-400 uppercase tracking-wider">Active Branches</p>
                  <h3 class="text-2xl font-black text-slate-800 tracking-tight" id="an-branches">0</h3>
                </div>
              </div>
            </div>
          </div>

          <div
            class="bg-white/80 backdrop-blur-xl border border-white/60 rounded-3xl shadow-[0_8px_30px_rgb(0,0,0,0.04)] p-6">
            <div class="h-[350px] w-full">
              <canvas id="analytics-main-chart"></canvas>
            </div>
          </div>

          <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">

            <div
              class="lg:col-span-2 bg-white/80 backdrop-blur-xl border border-white/60 rounded-3xl shadow-[0_8px_30px_rgb(0,0,0,0.04)] p-6">
              <div class="h-[300px] w-full">
                <canvas id="stockInOutChart"></canvas>
              </div>
            </div>

            <div
              class="bg-white/80 backdrop-blur-xl border border-white/60 rounded-3xl shadow-[0_8px_30px_rgb(0,0,0,0.04)] p-6 flex flex-col">
              <h3 class="font-bold text-slate-700 text-lg mb-4 flex items-center gap-2">
                <span class="text-amber-500">‚≠ê</span> Top Products
              </h3>
              <div class="flex-1 overflow-y-auto custom-scrollbar">
                <ul id="topProductsList" class="space-y-3">
                  <li class="text-center text-slate-400 text-xs py-10">Loading...</li>
                </ul>
              </div>
            </div>
          </div>

          <div
            class="bg-white/80 backdrop-blur-xl border border-white/60 rounded-3xl shadow-[0_8px_30px_rgb(0,0,0,0.04)] flex flex-col overflow-hidden">
            <div class="p-6 border-b border-slate-100 flex justify-between items-center bg-white/40">
              <div class="flex items-center gap-2">
                <div class="w-2 h-2 rounded-full bg-rose-500 animate-pulse"></div>
                <h3 class="font-bold text-slate-800">Critical Low Stock</h3>
              </div>
              <button onclick="showPage('inventory')"
                class="text-xs font-semibold text-rose-600 hover:bg-rose-50 px-3 py-1.5 rounded-lg transition">Manage
                Stock</button>
            </div>

            <div class="overflow-x-auto">
              <table class="w-full text-sm text-left">
                <thead class="bg-slate-50/80 text-xs uppercase text-slate-400 font-semibold border-b border-slate-100">
                  <tr>
                    <th class="px-6 py-4">Item Name</th>
                    <th class="px-6 py-4 text-right">Quantity</th>
                    <th class="px-6 py-4 text-right">Status</th>
                  </tr>
                </thead>
                <tbody id="lowStockTable" class="divide-y divide-slate-100">
                </tbody>
              </table>
            </div>
          </div>

        </section>

        <section id="branches-section" class="hidden">
          <div class="max-w-6xl mx-auto pt-4">
            <h2 class="text-2xl font-bold text-slate-800 mb-6">Branches</h2>
            <div class="bg-white/40 backdrop-blur-xl border border-white/50 rounded-3xl p-6 shadow-lg mb-6">
              <div class="flex flex-col md:flex-row gap-3">
                <input id="branchName" placeholder="Name"
                  class="flex-1 rounded-full border border-white/60 bg-white/50 px-4 py-2 text-sm outline-none focus:ring-2 focus:ring-emerald-400">
                <input id="branchAddress" placeholder="Address"
                  class="flex-1 rounded-full border border-white/60 bg-white/50 px-4 py-2 text-sm outline-none focus:ring-2 focus:ring-emerald-400">
                <input id="branchManager" placeholder="Manager"
                  class="flex-1 rounded-full border border-white/60 bg-white/50 px-4 py-2 text-sm outline-none focus:ring-2 focus:ring-emerald-400">
                <button id="addBranchBtn"
                  class="rounded-full bg-slate-900 text-white px-6 py-2 text-xs font-bold hover:bg-slate-800">Add</button>
              </div>
            </div>
            <div class="bg-white/40 backdrop-blur-xl border border-white/50 rounded-3xl overflow-hidden shadow-lg">
              <table class="min-w-full text-sm text-slate-700" id="branchesTable">
                <thead>
                  <tr class="bg-white/30 text-left text-xs font-bold text-slate-500 uppercase">
                    <th class="px-6 py-3">Name</th>
                    <th class="px-6 py-3">Address</th>
                    <th class="px-6 py-3">Manager</th>
                  </tr>
                </thead>
                <tbody id="branchesTableBody" class="divide-y divide-white/40"></tbody>
              </table>
            </div>
          </div>
        </section>

        <section id="qr-section" class="hidden">
          <div class="max-w-6xl mx-auto pt-4">
            <h2 class="text-2xl font-bold text-slate-800 mb-6">QR Tracking</h2>
            <div class="bg-white/50 backdrop-blur-xl border border-white/50 rounded-3xl p-6 shadow-lg max-w-lg">
              <h3 class="font-bold mb-3">Lookup QR</h3>
              <div class="flex gap-3">
                <input id="qrLookupInput" type="text" placeholder="Enter QR ID..."
                  class="flex-1 rounded-xl border border-white/60 bg-white/50 px-4 py-2 text-sm outline-none focus:ring-2 focus:ring-emerald-400">
                <button
                  class="bg-emerald-600 text-white rounded-xl px-4 py-2 font-medium hover:bg-emerald-700">Search</button>
              </div>
              <div id="qrLookupResult" class="mt-4 text-xs text-slate-500 italic">No search yet.</div>
            </div>
          </div>
        </section>

        <section id="admin-compliance-section" class="hidden">
          <div class="max-w-6xl mx-auto pt-4">
            <h1 class="text-2xl font-bold mb-6">Compliance</h1>
            <div class="bg-white/40 rounded-3xl p-10 text-center text-slate-500 shadow-lg">Placeholder</div>
          </div>
        </section>
        <section id="admin-roles-section" class="hidden">
          <div class="max-w-6xl mx-auto pt-4">
            <h1 class="text-2xl font-bold mb-6">Roles</h1>
            <div class="bg-white/40 rounded-3xl p-6 shadow-lg">
              <ul class="space-y-2 text-sm text-slate-600">
                <li><b>Admin:</b> Full access</li>
                <li><b>Manager:</b> Approvals</li>
              </ul>
            </div>
          </div>
        </section>
        <section id="admin-logs-section" class="hidden">
  <div class="max-w-6xl mx-auto pt-4 space-y-4">
    <h1 class="text-2xl font-bold mb-2">Logs</h1>

    <div class="bg-white/40 backdrop-blur-xl rounded-3xl p-4 shadow-lg border border-white/50">

      <div class="flex justify-between items-center mb-3">
        <h2 class="text-sm font-semibold text-slate-600">Recent activity</h2>

        <button
          type="button"
          onclick="fetchLogs()"
          class="px-3 py-1.5 rounded-full bg-slate-900 text-white text-xs font-bold hover:bg-slate-800">
          Refresh
        </button>
      </div>

      <div class="overflow-x-auto">
        <table class="w-full text-sm text-left">
          <thead class="bg-slate-50 text-xs uppercase text-slate-400 font-semibold">
            <tr>
              <th class="px-4 py-2">User</th>
              <th class="px-4 py-2">Role</th>
              <th class="px-4 py-2">Action</th>
              <th class="px-4 py-2">Details</th>
              <th class="px-4 py-2">Time</th>
            </tr>
          </thead>
          <tbody id="logsTableBody" class="divide-y divide-slate-100">
            <tr>
              <td colspan="5" class="px-4 py-6 text-center text-slate-400 text-xs">
                No logs loaded yet.
              </td>
            </tr>
          </tbody>
        </table>
      </div>

    </div>
  </div>
</section>


      </div>
    </main>

    <footer class="text-center py-6 text-slate-500 text-xs font-medium z-10">&copy; 2025 Premierlux Dental Clinic
    </footer>
  </div>


  <div id="batchOverlay"
    class="fixed inset-0 bg-slate-900/60 backdrop-blur-sm flex items-center justify-center z-[60] hidden">
    <div
      class="bg-white/90 backdrop-blur-xl rounded-3xl shadow-2xl max-w-3xl w-full max-h-[90vh] overflow-y-auto p-8 border border-white/50">
      <div class="flex justify-between items-center mb-6">
        <h2 class="text-2xl font-bold text-slate-900">Add Batch</h2>
        <button onclick="closeBatchOverlay()" class="text-slate-400 hover:text-slate-600 text-xl">‚úï</button>
      </div>
      <form id="batchForm" class="grid grid-cols-1 md:grid-cols-2 gap-5" onsubmit="submitBatchForm(event)">
        <div><label class="block text-xs font-bold text-slate-500 mb-1">Item Name</label><input id="batch_item_name"
            class="w-full rounded-xl border border-slate-200 px-3 py-2 text-sm focus:ring-emerald-500 outline-none"
            required></div>
        <div><label class="block text-xs font-bold text-slate-500 mb-1">SKU</label><input id="batch_sku"
            class="w-full rounded-xl border border-slate-200 px-3 py-2 text-sm focus:ring-emerald-500 outline-none">
        </div>
        <div class="relative z-50"> <label class="block text-xs font-bold text-slate-500 mb-1">Branch</label>

          <button type="button" id="batchBranchBtn" onclick="toggleBatchBranchMenu()"
            class="w-full bg-white border border-slate-200 text-slate-700 py-2 pl-3 pr-3 rounded-xl shadow-sm hover:bg-slate-50 outline-none transition-all duration-200 text-sm font-medium text-left flex items-center justify-between">
            <span id="batchBranchLabel">Select branch...</span>

            <svg class="w-4 h-4 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
            </svg>
          </button>

          <div id="batchBranchOptions"
            class="hidden absolute top-full left-0 mt-1 w-full bg-white border border-slate-200 rounded-xl shadow-xl max-h-48 overflow-y-auto custom-scrollbar p-1 transform origin-top transition-all z-[60]">
          </div>

          <input type="hidden" id="batch_branch" required>
        </div>
        <div><label class="block text-xs font-bold text-slate-500 mb-1">Monthly Usage</label><input type="number"
            id="batch_monthly_usage"
            class="w-full rounded-xl border border-slate-200 px-3 py-2 text-sm focus:ring-emerald-500 outline-none"
            value="0"></div>
        <div><label class="block text-xs font-bold text-slate-500 mb-1">Current Stock</label><input type="number"
            id="batch_current_stock"
            class="w-full rounded-xl border border-slate-200 px-3 py-2 text-sm focus:ring-emerald-500 outline-none"
            required></div>
        <div><label class="block text-xs font-bold text-slate-500 mb-1">Reorder Level</label><input type="number"
            id="batch_reorder_level"
            class="w-full rounded-xl border border-slate-200 px-3 py-2 text-sm focus:ring-emerald-500 outline-none"
            required></div>
        <div><label class="block text-xs font-bold text-slate-500 mb-1">Price</label><input type="number" step="0.01"
            id="batch_price"
            class="w-full rounded-xl border border-slate-200 px-3 py-2 text-sm focus:ring-emerald-500 outline-none">
        </div>
        <div><label class="block text-xs font-bold text-slate-500 mb-1">Batch #</label><input id="batch_batch_number"
            class="w-full rounded-xl border border-slate-200 px-3 py-2 text-sm focus:ring-emerald-500 outline-none">
        </div>
        <div><label class="block text-xs font-bold text-slate-500 mb-1">Lot #</label><input id="batch_lot_number"
            class="w-full rounded-xl border border-slate-200 px-3 py-2 text-sm focus:ring-emerald-500 outline-none">
        </div>
        <div><label class="block text-xs font-bold text-slate-500 mb-1">Mfg Date</label><input type="date"
            id="batch_mfg_date"
            class="w-full rounded-xl border border-slate-200 px-3 py-2 text-sm focus:ring-emerald-500 outline-none">
        </div>
        <div><label class="block text-xs font-bold text-slate-500 mb-1">Exp Date</label><input type="date"
            id="batch_exp_date"
            class="w-full rounded-xl border border-slate-200 px-3 py-2 text-sm focus:ring-emerald-500 outline-none">
        </div>
        <div><label class="block text-xs font-bold text-slate-500 mb-1">Supplier Batch</label><input
            id="batch_supplier_batch"
            class="w-full rounded-xl border border-slate-200 px-3 py-2 text-sm focus:ring-emerald-500 outline-none">
        </div>
        <div><label class="block text-xs font-bold text-slate-500 mb-1">QR ID</label><input id="batch_qr_code_id"
            class="w-full rounded-xl border border-slate-200 px-3 py-2 text-sm focus:ring-emerald-500 outline-none">
        </div>
        <div><label class="block text-xs font-bold text-slate-500 mb-1">Category</label><select id="itemCategory"
            class="w-full rounded-xl border border-slate-200 px-3 py-2 text-sm focus:ring-emerald-500 outline-none">
            <option>Consumables</option>
            <option>Instruments</option>
            <option>Equipment</option>
            <option>Others</option>
          </select></div>
        <div class="md:col-span-2 flex justify-end gap-3 pt-4 border-t border-slate-100">
          <button type="button" onclick="closeBatchOverlay()"
            class="px-5 py-2 rounded-xl border hover:bg-slate-50">Cancel</button>
          <button type="submit"
            class="px-5 py-2 rounded-xl bg-emerald-600 text-white font-bold hover:bg-emerald-700">Add Batch</button>
        </div>
      </form>
    </div>
  </div>

  <div id="editStockOverlay"
    class="fixed inset-0 bg-slate-900/60 backdrop-blur-sm flex items-center justify-center z-[60] hidden">
    <div class="bg-white/90 backdrop-blur-xl rounded-3xl shadow-2xl w-full max-w-md p-6">
      <div class="flex justify-between items-center mb-4">
        <h2 class="text-lg font-bold">Adjust Stock</h2>
        <button onclick="closeEditStockModal()" class="text-slate-400 hover:text-slate-600">‚úï</button>
      </div>
      <div class="space-y-4">
        <div>
          <h3 id="edit_item_name" class="font-bold"></h3>
          <p id="edit_item_branch" class="text-xs text-slate-500"></p>
        </div>
        <div class="flex gap-4 bg-slate-50 p-3 rounded-xl">
          <div class="flex-1"><span class="text-xs text-slate-400 block">Current</span><span id="edit_current_stock"
              class="font-bold text-lg">0</span></div>
          <div class="flex-1"><span class="text-xs text-slate-400 block">Action</span><select id="edit_action"
              class="w-full bg-transparent font-medium outline-none">
              <option value="out">Stock OUT</option>
              <option value="in">Stock IN</option>
              <option value="set">Set Exact</option>
            </select></div>
        </div>
        <input id="edit_quantity" type="number"
          class="w-full text-center text-3xl font-bold bg-transparent border-b outline-none" placeholder="0">
        <input id="edit_note" type="text" class="w-full rounded-xl border px-3 py-2 text-sm" placeholder="Reason">
        <div class="flex gap-3 pt-2">
          <button onclick="closeEditStockModal()" class="flex-1 py-2 rounded-xl border">Cancel</button>
          <button onclick="submitEditStock()"
            class="flex-1 py-2 rounded-xl bg-blue-600 text-white font-bold">Save</button>
        </div>
      </div>
    </div>
  </div>

  <div id="itemDetailsOverlay"
    class="fixed inset-0 bg-slate-900/60 backdrop-blur-sm flex items-center justify-center z-[60] hidden">
    <div
      class="bg-white/90 backdrop-blur-xl rounded-3xl shadow-2xl w-full max-w-md p-6 text-sm overflow-y-auto max-h-[85vh]">
      <div class="flex justify-between items-center mb-4 border-b pb-2">
        <h2 class="font-bold text-lg">Details</h2><button onclick="closeItemDetails()"
          class="text-slate-400 hover:text-slate-600">‚úï</button>
      </div>
      <div class="space-y-2">
        <div class="flex justify-between"><span class="text-slate-500">Name</span><span id="detail_name"
            class="font-medium text-right"></span></div>
        <div class="flex justify-between"><span class="text-slate-500">Branch</span><span id="detail_branch"
            class="text-right"></span></div>
        <div class="flex justify-between"><span class="text-slate-500">Stock</span><span id="detail_quantity"
            class="font-bold text-emerald-600 text-right"></span></div>
        <div class="flex justify-between"><span class="text-slate-500">Reorder Level</span><span id="detail_reorder"
            class="text-right"></span></div>
        <div class="flex justify-between"><span class="text-slate-500">Price</span><span id="detail_price"
            class="text-right"></span></div>
        <hr class="border-slate-200">
        <div class="flex justify-between"><span class="text-slate-500">SKU</span><span id="detail_sku"
            class="font-mono text-xs text-right"></span></div>
        <div class="flex justify-between"><span class="text-slate-500">Batch #</span><span id="detail_batch"
            class="text-right"></span></div>
        <div class="flex justify-between"><span class="text-slate-500">Lot #</span><span id="detail_lot"
            class="text-right"></span></div>
        <div class="flex justify-between"><span class="text-slate-500">Mfg Date</span><span id="detail_mfg"
            class="text-right"></span></div>
        <div class="flex justify-between"><span class="text-slate-500">Exp Date</span><span id="detail_exp"
            class="text-right"></span></div>
        <div class="flex justify-between"><span class="text-slate-500">Supp. Batch</span><span
            id="detail_supplier_batch" class="text-right"></span></div>
        <div class="mt-4 pt-2 border-t text-xs text-center text-slate-400 break-all" id="detail_qr"></div>
      </div>
    </div>
  </div>

  <div id="toast"
    class="fixed top-6 left-1/2 -translate-x-1/2 px-6 py-3 rounded-full bg-emerald-600 text-white text-sm font-bold shadow-2xl hidden z-[100]">
    Success!</div>

  <div id="restockOverlay" onclick="handleRestockOutsideClick(event)"
    class="fixed inset-0 bg-slate-900/60 backdrop-blur-sm flex items-center justify-center z-[70] hidden transition-opacity duration-300">

    <div
      class="bg-white/90 backdrop-blur-xl rounded-3xl shadow-2xl w-full max-w-lg p-8 border border-white/50 transform scale-100 transition-transform relative">

      <div class="flex justify-between items-center mb-6">
        <div>
          <h2 class="text-2xl font-bold text-slate-800">Request Restock</h2>
          <p class="text-sm text-slate-500">Create a purchase request for admin approval.</p>
        </div>
        <button type="button" onclick="closeRestockModal()"
          class="w-8 h-8 flex items-center justify-center rounded-full bg-slate-100 text-slate-400 hover:bg-slate-200 hover:text-slate-600 transition focus:outline-none">
          ‚úï
        </button>
      </div>

      <form onsubmit="submitRestockRequest(event)" class="space-y-5">
        <div class="bg-slate-50 p-4 rounded-2xl flex gap-4 border border-slate-100">
          <div
            class="h-12 w-12 rounded-xl bg-indigo-100 text-indigo-600 flex items-center justify-center text-xl font-bold">
            üì¶</div>
          <div>
            <h3 id="restock_item_name" class="font-bold text-slate-800">Item Name</h3>
            <p id="restock_branch" class="text-xs text-slate-500">Branch Name</p>
          </div>
        </div>

        <div class="grid grid-cols-2 gap-5">
          <div>
            <label class="block text-xs font-bold text-slate-500 uppercase mb-1">Current Stock</label>
            <input id="restock_current" type="text" disabled
              class="w-full bg-slate-100 border border-slate-200 rounded-xl px-4 py-2.5 text-slate-500 font-mono text-sm">
          </div>
          <div>
            <label class="block text-xs font-bold text-indigo-600 uppercase mb-1">Order Qty</label>
            <input id="restock_qty" type="number" min="1" required
              class="w-full bg-white border border-indigo-200 rounded-xl px-4 py-2.5 text-indigo-900 font-bold text-lg focus:ring-4 focus:ring-indigo-500/10 focus:border-indigo-500 outline-none transition">
          </div>

          <div class="col-span-2 relative z-50">
            <label class="block text-xs font-bold text-slate-500 uppercase mb-1">Select Supplier</label>

            <button type="button" id="restockSupplierBtn" onclick="toggleRestockSupplierMenu()"
              class="w-full bg-white border border-slate-200 text-slate-700 py-2.5 pl-4 pr-10 rounded-xl shadow-sm hover:bg-slate-50 outline-none transition-all duration-200 text-sm font-bold text-left flex items-center justify-between">
              <span id="restockSupplierLabel">Select Supplier...</span>
              <svg class="w-4 h-4 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
              </svg>
            </button>

            <div id="restockSupplierOptions"
              class="hidden absolute top-full left-0 mt-2 w-full bg-white/95 backdrop-blur-xl border border-slate-200 rounded-xl shadow-xl max-h-48 overflow-y-auto custom-scrollbar p-1 z-[60]">
            </div>

            <input type="hidden" id="restock_supplier" required>
          </div>
        </div>

        <div>
          <label class="block text-xs font-bold text-slate-500 uppercase mb-1">Priority Level</label>
          <div class="flex gap-2">
            <label class="cursor-pointer">
              <input type="radio" name="priority" value="normal" class="peer sr-only" checked>
              <div
                class="px-4 py-2 rounded-xl border border-slate-200 text-slate-500 text-sm peer-checked:bg-slate-800 peer-checked:text-white peer-checked:border-slate-800 transition">
                Normal</div>
            </label>
            <label class="cursor-pointer">
              <input type="radio" name="priority" value="high" class="peer sr-only">
              <div
                class="px-4 py-2 rounded-xl border border-slate-200 text-slate-500 text-sm peer-checked:bg-rose-500 peer-checked:text-white peer-checked:border-rose-500 transition">
                Urgent üî•</div>
            </label>
          </div>
        </div>

        <div>
          <label class="block text-xs font-bold text-slate-500 uppercase mb-1">Notes (Optional)</label>
          <textarea id="restock_notes" rows="2"
            class="w-full bg-white border border-slate-200 rounded-xl px-4 py-2 text-sm focus:ring-2 focus:ring-indigo-500/20 outline-none resize-none"></textarea>
        </div>

        <button type="submit"
          class="w-full py-3.5 rounded-2xl bg-indigo-600 hover:bg-indigo-700 text-white font-bold shadow-lg shadow-indigo-500/30 transition-all active:scale-[0.98]">
          Submit Request
        </button>
      </form>
    </div>
  </div>
  <div id="supplierOverlay"
    class="fixed inset-0 bg-slate-900/60 backdrop-blur-sm flex items-center justify-center z-[70] hidden transition-opacity duration-300">
    <div
      class="bg-white/90 backdrop-blur-xl rounded-3xl shadow-2xl w-full max-w-md p-8 border border-white/50 transform scale-100 transition-transform">

      <div class="flex justify-between items-center mb-6">
        <h2 class="text-2xl font-bold text-slate-800">New Supplier</h2>
        <button onclick="closeSupplierModal()"
          class="w-8 h-8 flex items-center justify-center rounded-full bg-slate-100 text-slate-400 hover:bg-slate-200 hover:text-slate-600 transition focus:outline-none">‚úï</button>
      </div>

      <form onsubmit="submitSupplierForm(event)" class="space-y-4">
        <div>
          <label class="block text-xs font-bold text-slate-500 uppercase mb-1">Company Name</label>
          <input id="new_supp_name" required
            class="w-full bg-white border border-slate-200 rounded-xl px-4 py-2.5 text-sm focus:ring-2 focus:ring-indigo-500/20 outline-none text-slate-700">
        </div>

        <div>
          <label class="block text-xs font-bold text-slate-500 uppercase mb-1">Contact Person</label>
          <input id="new_supp_contact"
            class="w-full bg-white border border-slate-200 rounded-xl px-4 py-2.5 text-sm focus:ring-2 focus:ring-indigo-500/20 outline-none text-slate-700">
        </div>

        <div class="grid grid-cols-2 gap-4">
          <div>
            <label class="block text-xs font-bold text-slate-500 uppercase mb-1">Phone</label>
            <input id="new_supp_phone"
              class="w-full bg-white border border-slate-200 rounded-xl px-4 py-2.5 text-sm focus:ring-2 focus:ring-indigo-500/20 outline-none text-slate-700">
          </div>
          <div>
            <label class="block text-xs font-bold text-slate-500 uppercase mb-1">Lead Time (Days)</label>
            <input id="new_supp_lead" type="number"
              class="w-full bg-white border border-slate-200 rounded-xl px-4 py-2.5 text-sm focus:ring-2 focus:ring-indigo-500/20 outline-none text-slate-700">
          </div>
        </div>

        <button type="submit"
          class="w-full py-3 rounded-xl bg-slate-900 text-white font-bold hover:bg-slate-800 shadow-lg shadow-slate-900/20 transition-all active:scale-[0.98]">
          Save Supplier
        </button>
      </form>
    </div>
  </div>
  </div>
  </div>


  <script src="/static/js/main.js"></script>
</body>

</html>
